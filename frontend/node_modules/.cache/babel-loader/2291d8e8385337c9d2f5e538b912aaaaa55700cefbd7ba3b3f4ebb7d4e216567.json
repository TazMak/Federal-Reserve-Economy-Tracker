{"ast":null,"code":"import React,{useRef,useEffect}from'react';import Chart from'chart.js/auto';// Import required Chart.js adapters\nimport'chartjs-adapter-date-fns';import{formatDate}from'../../utils/dateUtils';import{jsx as _jsx}from\"react/jsx-runtime\";const LineChart=_ref=>{let{data,xKey='date',yKey='value',color='#1f77b4',title='',tooltipFormatter=null}=_ref;const chartRef=useRef(null);const chartInstance=useRef(null);useEffect(()=>{// refresh the chart\nif(chartInstance.current){chartInstance.current.destroy();}if(!data||data.length===0||!chartRef.current){return;}const ctx=chartRef.current.getContext('2d');// Prepare chart data\nconst chartData={labels:data.map(item=>item[xKey]),datasets:[{label:title,data:data.map(item=>item[yKey]),borderColor:color,backgroundColor:color+'20',// Add transparency\nborderWidth:2,pointRadius:1,pointHoverRadius:5,fill:true,tension:0.1// Slight curve for lines\n}]};// Create new chart\nchartInstance.current=new Chart(ctx,{type:'line',data:chartData,options:{responsive:true,maintainAspectRatio:false,interaction:{mode:'index',intersect:false},plugins:{legend:{display:false},tooltip:{callbacks:{title:function(tooltipItems){// Format the date for tooltip title\nreturn formatDate(tooltipItems[0].label);},label:function(context){let value=context.parsed.y;// Use custom formatter if provided\nif(tooltipFormatter){return tooltipFormatter(value);}// Default formatting\nreturn value.toFixed(2);}}}},scales:{x:{type:'time',time:{parser:'yyyy-MM-dd',tooltipFormat:'MMM d, yyyy',unit:'month',displayFormats:{month:'MMM yyyy'}},title:{display:false},grid:{display:false},ticks:{autoSkip:true,maxTicksLimit:12}},y:{beginAtZero:false,title:{display:false},grid:{color:'#eee'}}}}});// Cleanup function\nreturn()=>{if(chartInstance.current){chartInstance.current.destroy();}};},[data,xKey,yKey,color,title,tooltipFormatter]);return/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:chartRef,height:\"250\"})});};export default LineChart;","map":{"version":3,"names":["React","useRef","useEffect","Chart","formatDate","jsx","_jsx","LineChart","_ref","data","xKey","yKey","color","title","tooltipFormatter","chartRef","chartInstance","current","destroy","length","ctx","getContext","chartData","labels","map","item","datasets","label","borderColor","backgroundColor","borderWidth","pointRadius","pointHoverRadius","fill","tension","type","options","responsive","maintainAspectRatio","interaction","mode","intersect","plugins","legend","display","tooltip","callbacks","tooltipItems","context","value","parsed","y","toFixed","scales","x","time","parser","tooltipFormat","unit","displayFormats","month","grid","ticks","autoSkip","maxTicksLimit","beginAtZero","className","children","ref","height"],"sources":["/home/tazmak/Desktop/2024_Code/py-Projects/FRED-tracker/Federal-Reserve-Economy-Tracker/frontend/src/components/charts/LineChart.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport Chart from 'chart.js/auto';\n// Import required Chart.js adapters\nimport 'chartjs-adapter-date-fns'; \nimport { formatDate } from '../../utils/dateUtils';\n\nconst LineChart = ({ \n  data, \n  xKey = 'date', \n  yKey = 'value', \n  color = '#1f77b4',\n  title = '',\n  tooltipFormatter = null\n}) => {\n  const chartRef = useRef(null);\n  const chartInstance = useRef(null);\n\n  useEffect(() => {\n    // refresh the chart\n    if (chartInstance.current) {\n      chartInstance.current.destroy();\n    }\n    \n    if (!data || data.length === 0 || !chartRef.current) {\n      return;\n    }\n    \n    const ctx = chartRef.current.getContext('2d');\n    \n    // Prepare chart data\n    const chartData = {\n      labels: data.map(item => item[xKey]),\n      datasets: [\n        {\n          label: title,\n          data: data.map(item => item[yKey]),\n          borderColor: color,\n          backgroundColor: color + '20', // Add transparency\n          borderWidth: 2,\n          pointRadius: 1,\n          pointHoverRadius: 5,\n          fill: true,\n          tension: 0.1 // Slight curve for lines\n        }\n      ]\n    };\n    \n    // Create new chart\n    chartInstance.current = new Chart(ctx, {\n      type: 'line',\n      data: chartData,\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        interaction: {\n          mode: 'index',\n          intersect: false,\n        },\n        plugins: {\n          legend: {\n            display: false,\n          },\n          tooltip: {\n            callbacks: {\n              title: function(tooltipItems) {\n                // Format the date for tooltip title\n                return formatDate(tooltipItems[0].label);\n              },\n              label: function(context) {\n                let value = context.parsed.y;\n                \n                // Use custom formatter if provided\n                if (tooltipFormatter) {\n                  return tooltipFormatter(value);\n                }\n                \n                // Default formatting\n                return value.toFixed(2);\n              }\n            }\n          }\n        },\n        scales: {\n          x: {\n            type: 'time',\n            time: {\n              parser: 'yyyy-MM-dd',\n              tooltipFormat: 'MMM d, yyyy',\n              unit: 'month',\n              displayFormats: {\n                month: 'MMM yyyy'\n              }\n            },\n            title: {\n              display: false\n            },\n            grid: {\n              display: false\n            },\n            ticks: {\n              autoSkip: true,\n              maxTicksLimit: 12\n            }\n          },\n          y: {\n            beginAtZero: false,\n            title: {\n              display: false\n            },\n            grid: {\n              color: '#eee'\n            }\n          }\n        }\n      }\n    });\n    \n    // Cleanup function\n    return () => {\n      if (chartInstance.current) {\n        chartInstance.current.destroy();\n      }\n    };\n  }, [data, xKey, yKey, color, title, tooltipFormatter]);\n\n  return (\n    <div className=\"chart-container\">\n      <canvas ref={chartRef} height=\"250\"></canvas>\n    </div>\n  );\n};\n\nexport default LineChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}